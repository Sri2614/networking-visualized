# ðŸ”„ NAT (Network Address Translation)
## Visual Guide for Presentations

---

## ðŸ“Œ Key Takeaways

- **NAT translates IPs:** Converts private IPs to public IPs, allowing multiple devices to share one public IP.
- **Three NAT types:** Static (1:1 mapping), Dynamic (pool of IPs), PAT/NAPT (many:1 using ports - most common).
- **SNAT vs DNAT:** SNAT modifies source IP (outbound); DNAT modifies destination IP (inbound/port forwarding).
- **Cloud NAT:** AWS NAT Gateway, Azure NAT Gateway, GCP Cloud NAT provide managed NAT services.
- **Command Tip:** Use `iptables -t nat -L` (Linux) to view NAT rules.

---

## ðŸŽ¯ What is NAT?

**NAT = Translating Private IPs to Public IPs**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WITHOUT NAT                                â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Device 1 â”‚  â”‚ Device 2 â”‚  â”‚ Device 3 â”‚                â”‚
â”‚  â”‚192.168.1.5â”‚  â”‚192.168.1.6â”‚  â”‚192.168.1.7â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â”‚
â”‚       â”‚             â”‚             â”‚                        â”‚
â”‚       â”‚ Direct connection to internet                     â”‚
â”‚       â”‚             â”‚             â”‚                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â–¼                                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   Internet   â”‚                                  â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  [!]  Each device needs public IP                â”‚
â”‚            â”‚  [!]  Expensive                                  â”‚
â”‚            â”‚  [!]  Security risk                              â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                              â”‚
â”‚  [X] Not scalable                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    WITH NAT                                  â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ Device 1 â”‚  â”‚ Device 2 â”‚  â”‚ Device 3 â”‚                â”‚
â”‚  â”‚192.168.1.5â”‚  â”‚192.168.1.6â”‚  â”‚192.168.1.7â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                â”‚
â”‚       â”‚             â”‚             â”‚                        â”‚
â”‚       â”‚             â”‚             â”‚                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â–¼                                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   NAT        â”‚                                  â”‚
â”‚            â”‚   Router     â”‚                                  â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  Translates:                                    â”‚
â”‚            â”‚  192.168.1.5 â†’ 203.0.113.10:50001            â”‚
â”‚            â”‚  192.168.1.6 â†’ 203.0.113.10:50002            â”‚
â”‚            â”‚  192.168.1.7 â†’ 203.0.113.10:50003            â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â”‚ Single public IP                         â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â–¼                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   Internet   â”‚                                  â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  [+] One public IP for all                       â”‚
â”‚            â”‚  [+] Cost-effective                              â”‚
â”‚            â”‚  [+] Security (hides internal IPs)              â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                              â”‚
â”‚  [+] Scalable and secure                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ NAT Types

### Static NAT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STATIC NAT                                      â”‚
â”‚              (One-to-One Mapping)                             â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚  Private IP  â”‚                                           â”‚
â”‚  â”‚  192.168.1.10â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚ Always maps to                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚  Public IP   â”‚                                           â”‚
â”‚  â”‚ 203.0.113.10 â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   Internet   â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                              â”‚
â”‚  Characteristics:                                            â”‚
â”‚  [+] Permanent mapping                                        â”‚
â”‚  [+] One private IP = One public IP                          â”‚
â”‚  [+] Used for servers that need consistent public IP        â”‚
â”‚                                                              â”‚
â”‚  Use Cases:                                                  â”‚
â”‚  â€¢ Web servers                                               â”‚
â”‚  â€¢ Mail servers                                              â”‚
â”‚  â€¢ Servers that need inbound connections                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dynamic NAT

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DYNAMIC NAT                                     â”‚
â”‚              (Many-to-Many Mapping)                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Device 1 â”‚  â”‚ Device 2 â”‚  â”‚ Device 3 â”‚                  â”‚
â”‚  â”‚192.168.1.5â”‚  â”‚192.168.1.6â”‚  â”‚192.168.1.7â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚       â”‚             â”‚             â”‚                          â”‚
â”‚       â”‚             â”‚             â”‚                          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â–¼                                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   NAT Pool   â”‚                                  â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  Public IPs:                                    â”‚
â”‚            â”‚  203.0.113.10                                   â”‚
â”‚            â”‚  203.0.113.11                                   â”‚
â”‚            â”‚  203.0.113.12                                   â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  Assigns available IP                           â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â”‚ Dynamic assignment                       â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â–¼                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   Internet   â”‚                                  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                              â”‚
â”‚  Characteristics:                                            â”‚
â”‚  [+] Temporary mapping                                        â”‚
â”‚  [+] Many private IPs share pool of public IPs               â”‚
â”‚  [+] IP released when connection ends                        â”‚
â”‚                                                              â”‚
â”‚  Use Cases:                                                  â”‚
â”‚  â€¢ Offices with many devices                                 â”‚
â”‚  â€¢ When you have limited public IPs                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### PAT (Port Address Translation) / NAT Overload

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PAT (NAT OVERLOAD)                              â”‚
â”‚              (Many-to-One with Ports)                         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Device 1 â”‚  â”‚ Device 2 â”‚  â”‚ Device 3 â”‚                  â”‚
â”‚  â”‚192.168.1.5â”‚  â”‚192.168.1.6â”‚  â”‚192.168.1.7â”‚                  â”‚
â”‚  â”‚:50000    â”‚  â”‚:50001    â”‚  â”‚:50002    â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚       â”‚             â”‚             â”‚                          â”‚
â”‚       â”‚             â”‚             â”‚                          â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â–¼                                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   PAT        â”‚                                  â”‚
â”‚            â”‚   Router     â”‚                                  â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  Translates:                                    â”‚
â”‚            â”‚  192.168.1.5:50000 â†’ 203.0.113.10:60001      â”‚
â”‚            â”‚  192.168.1.6:50001 â†’ 203.0.113.10:60002      â”‚
â”‚            â”‚  192.168.1.7:50002 â†’ 203.0.113.10:60003      â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  Uses ports to differentiate                   â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â”‚ Single public IP + different ports       â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â–¼                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   Internet   â”‚                                  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                              â”‚
â”‚  Characteristics:                                            â”‚
â”‚  [+] Many devices share ONE public IP                        â”‚
â”‚  [+] Uses port numbers to track connections                  â”‚
â”‚  [+] Most common type (home routers use this)                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mermaid Diagram: NAT Translation Flow

```mermaid
stateDiagram-v2
    [*] --> Outgoing

    state "Outgoing Packet" as Outgoing
    Outgoing: Source: 192.168.1.100:5000
    Outgoing: Destination: 8.8.8.8:53

    state "SNAT Translation" as SNAT
    SNAT: NAT Table Entry Created
    SNAT: 192.168.1.100:5000 â†” 203.0.113.50:12345

    state "On The Wire" as Wire
    Wire: Source: 203.0.113.50:12345
    Wire: Destination: 8.8.8.8:53

    state "Response Arrives" as Response
    Response: Source: 8.8.8.8:53
    Response: Destination: 203.0.113.50:12345

    state "DNAT Translation" as DNAT
    DNAT: NAT Table Lookup
    DNAT: Reverse translation applied

    state "Delivered" as Delivered
    Delivered: Source: 8.8.8.8:53
    Delivered: Destination: 192.168.1.100:5000

    Outgoing --> SNAT: NAT Router
    SNAT --> Wire: To Internet
    Wire --> Response: Server Reply
    Response --> DNAT: NAT Router
    DNAT --> Delivered: To Internal Host
    Delivered --> [*]
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PAT CONTINUED                                   â”‚
â”‚                                                              â”‚
â”‚  Use Cases:                                                  â”‚
â”‚  â€¢ Home networks                                             â”‚
â”‚  â€¢ Small offices                                             â”‚
â”‚  â€¢ Most common NAT type                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ”„ NAT Flow: How It Works

### Outbound Connection (SNAT)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SNAT FLOW (Source NAT)                          â”‚
â”‚              (Private â†’ Public)                               â”‚
â”‚                                                              â”‚
â”‚  Step 1: Internal Device Makes Request                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ Device   â”‚                                              â”‚
â”‚  â”‚192.168.1.5â”‚                                              â”‚
â”‚  â”‚          â”‚                                              â”‚
â”‚  â”‚  Request: GET http://example.com                       â”‚
â”‚  â”‚  Source: 192.168.1.5:50000                             â”‚
â”‚  â”‚  Dest: example.com:80                                  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚                                                    â”‚
â”‚       â–¼                                                    â”‚
â”‚  Step 2: NAT Router Receives Packet                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   NAT        â”‚                                           â”‚
â”‚  â”‚   Router     â”‚                                           â”‚
â”‚  â”‚              â”‚                                           â”‚
â”‚  â”‚  Creates NAT table entry:                               â”‚
â”‚  â”‚  Private IP:Port â†’ Public IP:Port                      â”‚
â”‚  â”‚  192.168.1.5:50000 â†’ 203.0.113.10:60001               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚ Translates source address                        â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  Step 3: Packet Sent to Internet                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   Internet   â”‚                                           â”‚
â”‚  â”‚              â”‚                                           â”‚
â”‚  â”‚  Packet:                                                â”‚
â”‚  â”‚  Source: 203.0.113.10:60001                           â”‚
â”‚  â”‚  Dest: example.com:80                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  Step 4: Response Returns                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   Server     â”‚                                           â”‚
â”‚  â”‚              â”‚                                           â”‚
â”‚  â”‚  Response:                                              â”‚
â”‚  â”‚  Source: example.com:80                                â”‚
â”‚  â”‚  Dest: 203.0.113.10:60001                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  Step 5: NAT Router Translates Back                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   NAT        â”‚                                           â”‚
â”‚  â”‚   Router     â”‚                                           â”‚
â”‚  â”‚              â”‚                                           â”‚
â”‚  â”‚  Looks up NAT table:                                    â”‚
â”‚  â”‚  203.0.113.10:60001 â†’ 192.168.1.5:50000               â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Translates destination                                â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ Device   â”‚                                              â”‚
â”‚  â”‚192.168.1.5â”‚                                              â”‚
â”‚  â”‚          â”‚                                              â”‚
â”‚  â”‚  Receives response                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                              â”‚
â”‚  [+] NAT table maintains connection state                    â”‚
â”‚  [+] Return traffic automatically routed                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Inbound Connection (DNAT)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              DNAT FLOW (Destination NAT)                     â”‚
â”‚              (Public â†’ Private)                               â”‚
â”‚                                                              â”‚
â”‚  Step 1: External Request                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚ Internet â”‚                                              â”‚
â”‚  â”‚  Client  â”‚                                              â”‚
â”‚  â”‚          â”‚                                              â”‚
â”‚  â”‚  Request to: 203.0.113.10:80                           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚                                                    â”‚
â”‚       â–¼                                                    â”‚
â”‚  Step 2: NAT Router Receives                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚   NAT        â”‚                                           â”‚
â”‚  â”‚   Router     â”‚                                           â”‚
â”‚  â”‚              â”‚                                           â”‚
â”‚  â”‚  Port forwarding rule:                                  â”‚
â”‚  â”‚  Public:Port â†’ Private:Port                            â”‚
â”‚  â”‚  203.0.113.10:80 â†’ 192.168.1.10:80                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚         â”‚                                                    â”‚
â”‚         â”‚ Translates destination                            â”‚
â”‚         â”‚                                                    â”‚
â”‚         â–¼                                                    â”‚
â”‚  Step 3: Packet Forwarded to Internal                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚  â”‚  Server  â”‚                                              â”‚
â”‚  â”‚192.168.1.10â”‚                                             â”‚
â”‚  â”‚          â”‚                                              â”‚
â”‚  â”‚  Receives:                                              â”‚
â”‚  â”‚  Dest: 192.168.1.10:80                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                              â”‚
â”‚  [+] External clients can reach internal servers            â”‚
â”‚  [+] Port forwarding enables inbound connections            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“Š NAT Comparison Table

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Feature          â”‚ Static NAT       â”‚ Dynamic NAT      â”‚ PAT (Overload)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Mapping          â”‚ 1:1              â”‚ Many:Many        â”‚ Many:1           â”‚
â”‚ Public IPs       â”‚ One per device   â”‚ Pool of IPs      â”‚ Single IP        â”‚
â”‚ Port Usage       â”‚ No               â”‚ No               â”‚ Yes              â”‚
â”‚ Scalability      â”‚ Limited          â”‚ Medium           â”‚ High             â”‚
â”‚ Cost             â”‚ High             â”‚ Medium           â”‚ Low              â”‚
â”‚ Use Case         â”‚ Servers          â”‚ Offices          â”‚ Home/Small       â”‚
â”‚ Configuration    â”‚ Manual           â”‚ Automatic        â”‚ Automatic        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â˜ï¸ Cloud NAT Examples

### AWS NAT Gateway

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AWS NAT GATEWAY                                 â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Public Subnet                                     â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚    â”‚
â”‚  â”‚  â”‚ NAT Gateway  â”‚                                  â”‚    â”‚
â”‚  â”‚  â”‚              â”‚                                  â”‚    â”‚
â”‚  â”‚  â”‚  Elastic IP: 203.0.113.10                     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚    â”‚
â”‚  â”‚         â”‚                                            â”‚    â”‚
â”‚  â”‚         â”‚                                            â”‚    â”‚
â”‚  â”‚         â–¼                                            â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚    â”‚
â”‚  â”‚  â”‚ Internet     â”‚                                  â”‚    â”‚
â”‚  â”‚  â”‚ Gateway      â”‚                                  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Private Subnet                                    â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚    â”‚
â”‚  â”‚  â”‚ EC2      â”‚  â”‚ EC2      â”‚  â”‚ RDS      â”‚        â”‚    â”‚
â”‚  â”‚  â”‚Instance  â”‚  â”‚Instance  â”‚  â”‚Database  â”‚        â”‚    â”‚
â”‚  â”‚  â”‚10.0.1.10 â”‚  â”‚10.0.1.11 â”‚  â”‚10.0.2.10 â”‚        â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚    â”‚
â”‚  â”‚       â”‚             â”‚                            â”‚    â”‚
â”‚  â”‚       â”‚ Route through NAT Gateway                â”‚    â”‚
â”‚  â”‚       â”‚                                            â”‚    â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚    â”‚
â”‚  â”‚                     â”‚                              â”‚    â”‚
â”‚  â”‚                     â–¼                              â”‚    â”‚
â”‚  â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚    â”‚
â”‚  â”‚            â”‚ NAT Gateway  â”‚                        â”‚    â”‚
â”‚  â”‚            â”‚ (in Public)  â”‚                        â”‚    â”‚
â”‚  â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  Route Table Configuration:                                 â”‚
â”‚  â€¢ Private subnet routes 0.0.0.0/0 â†’ NAT Gateway          â”‚
â”‚  â€¢ NAT Gateway routes to Internet Gateway                  â”‚
â”‚                                                              â”‚
â”‚  [+] Managed service                                         â”‚
â”‚  [+] High availability                                       â”‚
â”‚  [+] Automatic scaling                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Azure NAT Gateway

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AZURE NAT GATEWAY                               â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Virtual Network                                   â”‚    â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚    â”‚
â”‚  â”‚                                                    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚    â”‚
â”‚  â”‚  â”‚ VM       â”‚  â”‚ VM       â”‚                      â”‚    â”‚
â”‚  â”‚  â”‚10.0.1.10 â”‚  â”‚10.0.1.11 â”‚                      â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                      â”‚    â”‚
â”‚  â”‚       â”‚             â”‚                            â”‚    â”‚
â”‚  â”‚       â”‚             â”‚                            â”‚    â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚    â”‚
â”‚  â”‚                   â”‚                                â”‚    â”‚
â”‚  â”‚                   â–¼                                â”‚    â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚    â”‚
â”‚  â”‚          â”‚ NAT Gateway  â”‚                          â”‚    â”‚
â”‚  â”‚          â”‚              â”‚                          â”‚    â”‚
â”‚  â”‚          â”‚  Public IP: 203.0.113.10               â”‚    â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚    â”‚
â”‚  â”‚                 â”‚                                    â”‚    â”‚
â”‚  â”‚                 â”‚                                    â”‚    â”‚
â”‚  â”‚                 â–¼                                    â”‚    â”‚
â”‚  â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚    â”‚
â”‚  â”‚          â”‚   Internet   â”‚                          â”‚    â”‚
â”‚  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  Features:                                                   â”‚
â”‚  [+] Managed NAT service                                     â”‚
â”‚  [+] Up to 64,000 concurrent flows                          â”‚
â”‚  [+] Zone-redundant                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¯ NAT Use Cases

### Home Network

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              HOME NETWORK NAT                                â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Laptop   â”‚  â”‚ Phone   â”‚  â”‚ Tablet   â”‚                  â”‚
â”‚  â”‚192.168.1.5â”‚  â”‚192.168.1.6â”‚  â”‚192.168.1.7â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚       â”‚             â”‚             â”‚                        â”‚
â”‚       â”‚             â”‚             â”‚                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â–¼                                        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   Home       â”‚                                  â”‚
â”‚            â”‚   Router     â”‚                                  â”‚
â”‚            â”‚   (PAT)      â”‚                                  â”‚
â”‚            â”‚              â”‚                                  â”‚
â”‚            â”‚  Public IP: 203.0.113.45                      â”‚
â”‚            â”‚  (from ISP)                                    â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â”‚                                          â”‚
â”‚                   â–¼                                          â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚            â”‚   Internet   â”‚                                  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                                                              â”‚
â”‚  [+] All devices share one public IP                         â”‚
â”‚  [+] Cost-effective                                          â”‚
â”‚  [+] Security (hides internal network)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ” NAT Table Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              NAT TRANSLATION TABLE                            â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Internal IP:Port    â”‚ External IP:Port            â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ 192.168.1.5:50000  â”‚ 203.0.113.10:60001         â”‚    â”‚
â”‚  â”‚ 192.168.1.6:50001  â”‚ 203.0.113.10:60002         â”‚    â”‚
â”‚  â”‚ 192.168.1.7:50002  â”‚ 203.0.113.10:60003         â”‚    â”‚
â”‚  â”‚ 192.168.1.8:50003  â”‚ 203.0.113.10:60004         â”‚    â”‚
â”‚  â”‚ 192.168.1.5:50004  â”‚ 203.0.113.10:60005         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  How It Works:                                              â”‚
â”‚  1. Outbound: Maps private IP:port to public IP:port       â”‚
â”‚  2. Inbound: Looks up public IP:port, routes to private   â”‚
â”‚  3. Timeout: Entry removed after connection closes         â”‚
â”‚                                                              â”‚
â”‚  [+] Tracks all active connections                           â”‚
â”‚  [+] Enables return traffic routing                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ“‹ Prerequisites

Before starting this topic, you should understand:
- IP addressing and subnetting â†’ [See IP Addressing Guide](../01-ip-addressing/)
- Private vs Public IP addresses
- TCP/IP basics â†’ [See TCP/IP Guide](../02-tcp-ip/)
- Basic understanding of ports

---

## âš ï¸ Common Mistakes

### Mistake 1: Confusing SNAT and DNAT
```
âŒ Wrong: "SNAT is for incoming traffic"
âœ… Correct: SNAT = Source NAT (outbound), DNAT = Destination NAT (inbound)
```

### Mistake 2: Forgetting NAT Table Limits
```
âŒ Wrong: Assuming unlimited concurrent connections through NAT
âœ… Correct: NAT tables have limits (typically 64K ports per public IP)
```

### Mistake 3: Port Forwarding Without Security
```
âŒ Wrong: Port forward without firewall rules
âœ… Correct: Always combine port forwarding with proper firewall rules
```

### Mistake 4: Using NAT Instead of Proper Routing
```
âŒ Wrong: Using NAT between internal networks for "security"
âœ… Correct: Use proper routing + firewalls; NAT adds complexity
```

---

## ðŸ› ï¸ Command Reference

### Linux Commands (iptables)
```bash
# View NAT rules
iptables -t nat -L -n -v
iptables -t nat -L PREROUTING
iptables -t nat -L POSTROUTING

# SNAT (source NAT) - outbound
iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth0 -j SNAT --to-source 203.0.113.10

# DNAT (destination NAT) - port forwarding
iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to-destination 192.168.1.10:80

# View connection tracking (NAT table)
cat /proc/net/nf_conntrack
conntrack -L
```

### AWS NAT Gateway
```bash
# Create NAT Gateway (AWS CLI)
aws ec2 create-nat-gateway \
  --subnet-id subnet-xxx \
  --allocation-id eipalloc-xxx

# Update route table for private subnet
aws ec2 create-route \
  --route-table-id rtb-xxx \
  --destination-cidr-block 0.0.0.0/0 \
  --nat-gateway-id nat-xxx
```

### Windows Commands
```powershell
# View NAT configuration
Get-NetNat
Get-NetNatStaticMapping

# Create NAT (PowerShell)
New-NetNat -Name "MyNAT" -InternalIPInterfaceAddressPrefix 192.168.1.0/24
```

---

## ðŸ“Š Quick Reference Card

```
NAT QUICK REFERENCE
===================

NAT Types:
  - Static NAT   - 1:1 mapping (servers, DMZ)
  - Dynamic NAT  - Pool of public IPs
  - PAT/NAPT     - Many:1 using ports (most common)

Direction:
  - SNAT - Source NAT (outbound traffic)
  - DNAT - Destination NAT (inbound/port forwarding)

Cloud NAT Services:
  - AWS: NAT Gateway (managed), NAT Instance
  - Azure: NAT Gateway, Load Balancer outbound rules
  - GCP: Cloud NAT

Key Concepts:
  - NAT Table - Tracks IP:port mappings
  - Port exhaustion - Max ~64K connections per public IP
  - Hairpin NAT - Internal traffic via NAT (avoid!)

Common Use Cases:
  - Private subnet -> Internet access
  - Port forwarding -> Expose internal services
  - IP masquerading -> Hide internal network
```

---

## ðŸŽ¯ Key Takeaways for Presentations

1. **NAT = IP Translation** - Converts private IPs to public IPs
2. **Static NAT** - One-to-one permanent mapping
3. **Dynamic NAT** - Many-to-many temporary mapping
4. **PAT (Overload)** - Many-to-one using ports (most common)
5. **SNAT** - Source NAT (outbound traffic)
6. **DNAT** - Destination NAT (inbound traffic)
7. **NAT Table** - Tracks active translations
8. **Cloud NAT** - Managed NAT services (AWS, Azure, GCP)

---

## ðŸ§  Quick Quiz

<details>
<summary><strong>Q1:</strong> What does NAT stand for?</summary>

**Answer:** Network Address Translation

NAT translates private IP addresses to public IP addresses.
</details>

<details>
<summary><strong>Q2:</strong> What is PAT (Port Address Translation)?</summary>

**Answer:** Many-to-one NAT using port numbers

PAT allows multiple internal devices to share a single public IP by using unique port numbers.
</details>

<details>
<summary><strong>Q3:</strong> What is the difference between SNAT and DNAT?</summary>

**Answer:** SNAT modifies source IP (outbound); DNAT modifies destination IP (inbound)

SNAT is for outgoing traffic; DNAT is for port forwarding/incoming traffic.
</details>

<details>
<summary><strong>Q4:</strong> What AWS service provides managed NAT?</summary>

**Answer:** NAT Gateway

NAT Gateway is a managed, highly available NAT service for private subnet internet access.
</details>

---

## ðŸ“š Further Reading

- NAT traversal techniques
- NAT64 (IPv6 to IPv4 translation)
- Carrier-grade NAT (CGNAT)
- NAT performance optimization

---

**Previous:** [TCP/IP & OSI Model](../02-tcp-ip/) | **Next:** [Routing & Routing Protocols](../04-routing/)
